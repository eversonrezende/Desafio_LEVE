@page
@model LoginModel

@{
  ViewData["Title"] = "Login";
}

<div class="uk-section uk-section-muted uk-flex uk-flex-center uk-flex-middle" style="min-height: 100vh;">
  <div class="uk-width-medium">
    <div class="uk-card uk-card-default uk-card-body uk-box-shadow-large">
      <h1 class="uk-card-title uk-text-center">
        <img src="~/img/logo.png" alt="Logo Sistema LEVE" style="height: 48px; width: auto;" />
        <div class="uk-margin-small-top">Sistema LEVE</div>
      </h1>
      <p class="uk-text-center uk-text-muted">Fa√ßa login para continuar</p>

      <form id="account" method="post">
        <div asp-validation-summary="ModelOnly" class="uk-alert-danger" uk-alert hidden></div>

        @if (TempData["ErrorMessage"] != null)
        {
          <div class="uk-alert-danger" uk-alert>
            <a href class="uk-alert-close" uk-close></a>
            <p>@TempData["ErrorMessage"]</p>
          </div>
        }

        <div class="uk-margin">
          <label class="uk-form-label" asp-for="Input.Email">
            <span uk-icon="icon: mail; ratio: 0.8"></span> E-mail
          </label>
          <div class="uk-form-controls">
            <input class="uk-input" asp-for="Input.Email" autocomplete="username" placeholder="seu@email.com" />
            <span asp-validation-for="Input.Email" class="uk-text-danger uk-text-small"></span>
          </div>
        </div>

        <div class="uk-margin">
          <label class="uk-form-label" asp-for="Input.Password">
            <span uk-icon="icon: lock; ratio: 0.8"></span> Senha
          </label>
          <div class="uk-form-controls">
            <input class="uk-input" type="password" asp-for="Input.Password" autocomplete="current-password"
              placeholder="Digite sua senha" />
            <span asp-validation-for="Input.Password" class="uk-text-danger uk-text-small"></span>
          </div>
        </div>

        <div class="uk-margin">
          <button id="login-submit" type="submit" class="uk-button uk-button-primary uk-width-1-1">
            <span uk-icon="icon: sign-in; ratio: 0.9"></span> Entrar
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

@section Scripts {
  <partial name="_ValidationScriptsPartial" />
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const form = document.getElementById('account');
      const validationSummary = document.querySelector('[asp-validation-summary]');

      form.addEventListener('submit', function (e) {
        const errors = document.querySelectorAll('.uk-text-danger:not(:empty)');
        if (errors.length > 0 && validationSummary) {
          validationSummary.removeAttribute('hidden');
        }
      });
    });
  </script>
}